{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ComposedStore = void 0;\n\nconst ObservableStore_1 = require(\"./ObservableStore\");\n\nclass ComposedStore extends ObservableStore_1.ObservableStore {\n  constructor(children) {\n    // Typecast: Preserve existing behavior\n    super({}); // subscribe to children\n\n    this._children = children || {};\n    Object.keys(this._children).forEach(childKey => {\n      const child = this._children[childKey];\n\n      this._addChild(childKey, child);\n    });\n  }\n\n  _addChild(childKey, child) {\n    const updateFromChild = childValue => {\n      const state = this.getState();\n      state[childKey] = childValue;\n      this.putState(state);\n    };\n\n    child.subscribe(updateFromChild);\n    updateFromChild(child.getState());\n  }\n\n}\n\nexports.ComposedStore = ComposedStore;","map":{"version":3,"sources":["../src/ComposedStore.ts"],"names":[],"mappings":";;;;;;;AAAA,MAAA,iBAAA,GAAA,OAAA,CAAA,mBAAA,CAAA;;AAEA,MAAa,aAAb,SAEU,iBAAA,CAAA,eAFV,CAE4B;AAG1B,EAAA,WAAA,CAAY,QAAZ,EAAkE;AAChE;AACA,UAAM,EAAN,EAFgE,CAIhE;;AACA,SAAK,SAAL,GAAiB,QAAQ,IAAI,EAA7B;AACA,IAAA,MAAM,CAAC,IAAP,CAAY,KAAK,SAAjB,EAA4B,OAA5B,CAAqC,QAAD,IAAa;AAC/C,YAAM,KAAK,GAAG,KAAK,SAAL,CAAe,QAAf,CAAd;;AACA,WAAK,SAAL,CAAe,QAAf,EAAyB,KAAzB;AACD,KAHD;AAID;;AAED,EAAA,SAAS,CAAC,QAAD,EAAoB,KAApB,EAAsD;AAC7D,UAAM,eAAe,GAAI,UAAD,IAA2B;AACjD,YAAM,KAAK,GAAG,KAAK,QAAL,EAAd;AACA,MAAA,KAAK,CAAC,QAAD,CAAL,GAAkB,UAAlB;AACA,WAAK,QAAL,CAAc,KAAd;AACD,KAJD;;AAMA,IAAA,KAAK,CAAC,SAAN,CAAgB,eAAhB;AACA,IAAA,eAAe,CAAC,KAAK,CAAC,QAAN,EAAD,CAAf;AACD;;AAxByB;;AAF5B,OAAA,CAAA,aAAA,GAAA,aAAA","sourcesContent":["import { ObservableStore } from './ObservableStore';\n\nexport class ComposedStore<\n  T extends Record<string, Record<string, unknown>>,\n> extends ObservableStore<T> {\n  private _children: Record<keyof T, ObservableStore<T[keyof T]>>;\n\n  constructor(children: Record<keyof T, ObservableStore<T[keyof T]>>) {\n    // Typecast: Preserve existing behavior\n    super({} as unknown as T);\n\n    // subscribe to children\n    this._children = children || {};\n    Object.keys(this._children).forEach((childKey) => {\n      const child = this._children[childKey];\n      this._addChild(childKey, child);\n    });\n  }\n\n  _addChild(childKey: keyof T, child: ObservableStore<T[keyof T]>) {\n    const updateFromChild = (childValue: T[keyof T]) => {\n      const state = this.getState();\n      state[childKey] = childValue;\n      this.putState(state);\n    };\n\n    child.subscribe(updateFromChild);\n    updateFromChild(child.getState());\n  }\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}