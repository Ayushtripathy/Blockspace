{"ast":null,"code":"\"use strict\";\n\nvar _Reflect$construct = require(\"@babel/runtime-corejs3/core-js-stable/reflect/construct\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs3/regenerator\"));\n\nvar _bind = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/bind\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/getPrototypeOf\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/defineProperty\"));\n\nvar _events = _interopRequireDefault(require(\"events\"));\n\nvar _verifyChainId = _interopRequireDefault(require(\"../utils/verifyChainId\"));\n\nvar _events2 = require(\"./events\");\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = (0, _getPrototypeOf2.default)(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n      result = _Reflect$construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return (0, _possibleConstructorReturn2.default)(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !_Reflect$construct) return false;\n  if (_Reflect$construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(_Reflect$construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n/**\n * Abstract connector to connect EIP-1193 providers to Moralis\n *\n * It should implement at least:\n * - activate()\n * - Emit ConnectorEvent.CHAIN_CHANGED when the chain has changed (if possible)\n * - Emit ConnectorEvent.ACCOUNT_CHANGED when the account has changed (if possible)\n * - type: a name to identify\n * - network: the network type that is used (eg. 'evm')\n */\n\n\nvar AbstractWeb3Connector = /*#__PURE__*/function (_EventEmitter) {\n  (0, _inherits2.default)(AbstractWeb3Connector, _EventEmitter);\n\n  var _super = _createSuper(AbstractWeb3Connector);\n\n  function AbstractWeb3Connector() {\n    var _context, _context2, _context3, _context4;\n\n    var _this;\n\n    (0, _classCallCheck2.default)(this, AbstractWeb3Connector);\n    _this = _super.call(this);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"type\", 'abstract');\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"network\", 'evm');\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"account\", null);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"chainId\", null);\n    _this.handleAccountsChanged = (0, _bind.default)(_context = _this.handleAccountsChanged).call(_context, (0, _assertThisInitialized2.default)(_this));\n    _this.handleChainChanged = (0, _bind.default)(_context2 = _this.handleChainChanged).call(_context2, (0, _assertThisInitialized2.default)(_this));\n    _this.handleConnect = (0, _bind.default)(_context3 = _this.handleConnect).call(_context3, (0, _assertThisInitialized2.default)(_this));\n    _this.handleDisconnect = (0, _bind.default)(_context4 = _this.handleDisconnect).call(_context4, (0, _assertThisInitialized2.default)(_this));\n    return _this;\n  }\n\n  (0, _createClass2.default)(AbstractWeb3Connector, [{\n    key: \"subscribeToEvents\",\n    value: function (provider) {\n      if (provider && provider.on) {\n        provider.on(_events2.EthereumEvents.CHAIN_CHANGED, this.handleChainChanged);\n        provider.on(_events2.EthereumEvents.ACCOUNTS_CHANGED, this.handleAccountsChanged);\n        provider.on(_events2.EthereumEvents.CONNECT, this.handleConnect);\n        provider.on(_events2.EthereumEvents.DISCONNECT, this.handleDisconnect);\n      }\n    }\n  }, {\n    key: \"unsubscribeToEvents\",\n    value: function (provider) {\n      if (provider && provider.removeListener) {\n        provider.removeListener(_events2.EthereumEvents.CHAIN_CHANGED, this.handleChainChanged);\n        provider.removeListener(_events2.EthereumEvents.ACCOUNTS_CHANGED, this.handleAccountsChanged);\n        provider.removeListener(_events2.EthereumEvents.CONNECT, this.handleConnect);\n        provider.removeListener(_events2.EthereumEvents.DISCONNECT, this.handleDisconnect);\n      }\n    }\n    /**\n     * Activates the provider.\n     * Should returns an object with:\n     * - provider: A valid EIP-1193 provider\n     * - chainId(optional): the chainId that has been connected to (in hex format)\n     * - account(optional): the address that is connected to the provider\n     */\n\n  }, {\n    key: \"activate\",\n    value: function () {\n      var _activate = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee() {\n        return _regenerator.default.wrap(function (_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                throw new Error('Not implemented: activate()');\n\n              case 1:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function () {\n        return _activate.apply(this, arguments);\n      };\n    }()\n    /**\n     * Updates account and emit event, on EIP-1193 accountsChanged events\n     */\n\n  }, {\n    key: \"handleAccountsChanged\",\n    value: function (accounts) {\n      var account = accounts && accounts[0] ? accounts[0].toLowerCase() : null;\n      this.account = account;\n      this.emit(_events2.ConnectorEvents.ACCOUNT_CHANGED, account);\n    }\n    /**\n     * Updates chainId and emit event, on EIP-1193 accountsChanged events\n     */\n\n  }, {\n    key: \"handleChainChanged\",\n    value: function (chainId) {\n      var newChainId = (0, _verifyChainId.default)(chainId);\n      this.chainId = newChainId;\n      this.emit(_events2.ConnectorEvents.CHAIN_CHANGED, newChainId);\n    }\n  }, {\n    key: \"handleConnect\",\n    value: function (connectInfo) {\n      this.emit(_events2.ConnectorEvents.CONNECT, connectInfo);\n    }\n  }, {\n    key: \"handleDisconnect\",\n    value: function (error) {\n      this.emit(_events2.ConnectorEvents.DISCONNECT, error);\n    }\n    /**\n     * Cleans all active listners, connections and stale references\n     */\n\n  }, {\n    key: \"deactivate\",\n    value: function () {\n      var _deactivate = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2() {\n        return _regenerator.default.wrap(function (_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                this.unsubscribeToEvents(this.provider);\n                this.account = null;\n                this.chainId = null;\n\n              case 3:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function () {\n        return _deactivate.apply(this, arguments);\n      };\n    }()\n  }]);\n  return AbstractWeb3Connector;\n}(_events.default);\n\nvar _default = AbstractWeb3Connector;\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/ASUS/Desktop/Twitter-Start/node_modules/moralis/lib/browser/Web3Connector/AbstractWeb3Connector.js"],"names":["_Reflect$construct","require","_Object$defineProperty","_interopRequireDefault","exports","value","default","_regenerator","_bind","_asyncToGenerator2","_classCallCheck2","_createClass2","_assertThisInitialized2","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","_defineProperty2","_events","_verifyChainId","_events2","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","Super","result","NewTarget","constructor","arguments","apply","Reflect","sham","Proxy","Boolean","prototype","valueOf","call","e","AbstractWeb3Connector","_EventEmitter","_super","_context","_context2","_context3","_context4","_this","handleAccountsChanged","handleChainChanged","handleConnect","handleDisconnect","key","provider","on","EthereumEvents","CHAIN_CHANGED","ACCOUNTS_CHANGED","CONNECT","DISCONNECT","removeListener","_activate","mark","_callee","wrap","_context5","prev","next","Error","stop","accounts","account","toLowerCase","emit","ConnectorEvents","ACCOUNT_CHANGED","chainId","newChainId","connectInfo","error","_deactivate","_callee2","_context6","unsubscribeToEvents","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _Reflect$construct = require(\"@babel/runtime-corejs3/core-js-stable/reflect/construct\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs3/regenerator\"));\n\nvar _bind = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/bind\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/getPrototypeOf\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/defineProperty\"));\n\nvar _events = _interopRequireDefault(require(\"events\"));\n\nvar _verifyChainId = _interopRequireDefault(require(\"../utils/verifyChainId\"));\n\nvar _events2 = require(\"./events\");\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = (0, _getPrototypeOf2.default)(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n      result = _Reflect$construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return (0, _possibleConstructorReturn2.default)(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !_Reflect$construct) return false;\n  if (_Reflect$construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(_Reflect$construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n/**\n * Abstract connector to connect EIP-1193 providers to Moralis\n *\n * It should implement at least:\n * - activate()\n * - Emit ConnectorEvent.CHAIN_CHANGED when the chain has changed (if possible)\n * - Emit ConnectorEvent.ACCOUNT_CHANGED when the account has changed (if possible)\n * - type: a name to identify\n * - network: the network type that is used (eg. 'evm')\n */\n\n\nvar AbstractWeb3Connector = /*#__PURE__*/function (_EventEmitter) {\n  (0, _inherits2.default)(AbstractWeb3Connector, _EventEmitter);\n\n  var _super = _createSuper(AbstractWeb3Connector);\n\n  function AbstractWeb3Connector() {\n    var _context, _context2, _context3, _context4;\n\n    var _this;\n\n    (0, _classCallCheck2.default)(this, AbstractWeb3Connector);\n    _this = _super.call(this);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"type\", 'abstract');\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"network\", 'evm');\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"account\", null);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"chainId\", null);\n    _this.handleAccountsChanged = (0, _bind.default)(_context = _this.handleAccountsChanged).call(_context, (0, _assertThisInitialized2.default)(_this));\n    _this.handleChainChanged = (0, _bind.default)(_context2 = _this.handleChainChanged).call(_context2, (0, _assertThisInitialized2.default)(_this));\n    _this.handleConnect = (0, _bind.default)(_context3 = _this.handleConnect).call(_context3, (0, _assertThisInitialized2.default)(_this));\n    _this.handleDisconnect = (0, _bind.default)(_context4 = _this.handleDisconnect).call(_context4, (0, _assertThisInitialized2.default)(_this));\n    return _this;\n  }\n\n  (0, _createClass2.default)(AbstractWeb3Connector, [{\n    key: \"subscribeToEvents\",\n    value: function (provider) {\n      if (provider && provider.on) {\n        provider.on(_events2.EthereumEvents.CHAIN_CHANGED, this.handleChainChanged);\n        provider.on(_events2.EthereumEvents.ACCOUNTS_CHANGED, this.handleAccountsChanged);\n        provider.on(_events2.EthereumEvents.CONNECT, this.handleConnect);\n        provider.on(_events2.EthereumEvents.DISCONNECT, this.handleDisconnect);\n      }\n    }\n  }, {\n    key: \"unsubscribeToEvents\",\n    value: function (provider) {\n      if (provider && provider.removeListener) {\n        provider.removeListener(_events2.EthereumEvents.CHAIN_CHANGED, this.handleChainChanged);\n        provider.removeListener(_events2.EthereumEvents.ACCOUNTS_CHANGED, this.handleAccountsChanged);\n        provider.removeListener(_events2.EthereumEvents.CONNECT, this.handleConnect);\n        provider.removeListener(_events2.EthereumEvents.DISCONNECT, this.handleDisconnect);\n      }\n    }\n    /**\n     * Activates the provider.\n     * Should returns an object with:\n     * - provider: A valid EIP-1193 provider\n     * - chainId(optional): the chainId that has been connected to (in hex format)\n     * - account(optional): the address that is connected to the provider\n     */\n\n  }, {\n    key: \"activate\",\n    value: function () {\n      var _activate = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee() {\n        return _regenerator.default.wrap(function (_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                throw new Error('Not implemented: activate()');\n\n              case 1:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function () {\n        return _activate.apply(this, arguments);\n      };\n    }()\n    /**\n     * Updates account and emit event, on EIP-1193 accountsChanged events\n     */\n\n  }, {\n    key: \"handleAccountsChanged\",\n    value: function (accounts) {\n      var account = accounts && accounts[0] ? accounts[0].toLowerCase() : null;\n      this.account = account;\n      this.emit(_events2.ConnectorEvents.ACCOUNT_CHANGED, account);\n    }\n    /**\n     * Updates chainId and emit event, on EIP-1193 accountsChanged events\n     */\n\n  }, {\n    key: \"handleChainChanged\",\n    value: function (chainId) {\n      var newChainId = (0, _verifyChainId.default)(chainId);\n      this.chainId = newChainId;\n      this.emit(_events2.ConnectorEvents.CHAIN_CHANGED, newChainId);\n    }\n  }, {\n    key: \"handleConnect\",\n    value: function (connectInfo) {\n      this.emit(_events2.ConnectorEvents.CONNECT, connectInfo);\n    }\n  }, {\n    key: \"handleDisconnect\",\n    value: function (error) {\n      this.emit(_events2.ConnectorEvents.DISCONNECT, error);\n    }\n    /**\n     * Cleans all active listners, connections and stale references\n     */\n\n  }, {\n    key: \"deactivate\",\n    value: function () {\n      var _deactivate = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2() {\n        return _regenerator.default.wrap(function (_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                this.unsubscribeToEvents(this.provider);\n                this.account = null;\n                this.chainId = null;\n\n              case 3:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function () {\n        return _deactivate.apply(this, arguments);\n      };\n    }()\n  }]);\n  return AbstractWeb3Connector;\n}(_events.default);\n\nvar _default = AbstractWeb3Connector;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}