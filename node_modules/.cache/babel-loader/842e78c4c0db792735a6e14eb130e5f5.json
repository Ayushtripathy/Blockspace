{"ast":null,"code":"\"use strict\";\n\nvar _Reflect$construct = require(\"@babel/runtime-corejs3/core-js-stable/reflect/construct\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs3/regenerator\"));\n\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\n\nvar _concat = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"));\n\nvar _url = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/url\"));\n\nvar _keys = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/keys\"));\n\nvar _reduce = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/reduce\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/getPrototypeOf\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/createClass\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/classCallCheck\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/defineProperty\"));\n\nvar _CoreManager = _interopRequireDefault(require(\"../CoreManager\"));\n\nvar _convert = require(\"../utils/convert\");\n\nvar _verifyChainId = _interopRequireDefault(require(\"../utils/verifyChainId\"));\n\nvar _AbstractWeb3Connector = _interopRequireDefault(require(\"./AbstractWeb3Connector\"));\n\nvar _MoralisRpcs = require(\"./MoralisRpcs\");\n\nvar _ethers = require(\"ethers\");\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = (0, _getPrototypeOf2.default)(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n      result = _Reflect$construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return (0, _possibleConstructorReturn2.default)(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !_Reflect$construct) return false;\n  if (_Reflect$construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(_Reflect$construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar MiniRpcProvider = /*#__PURE__*/(0, _createClass2.default)(function MiniRpcProvider(chainId, url) {\n  var _this = this;\n\n  (0, _classCallCheck2.default)(this, MiniRpcProvider);\n  (0, _defineProperty2.default)(this, \"request\", /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(method, params) {\n      var RESTController, response, _context, body, _body$error, _body$error2, _body$error3, _context2;\n\n      return _regenerator.default.wrap(function (_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (typeof method !== 'string') {\n                // eslint-disable-next-line prefer-destructuring\n                params = method.params; // eslint-disable-next-line prefer-destructuring\n\n                method = method.method;\n              }\n\n              RESTController = _CoreManager.default.getRESTController();\n              _context3.prev = 2;\n              _context3.next = 5;\n              return RESTController.ajax('POST', _this.url, (0, _stringify.default)({\n                jsonrpc: '2.0',\n                id: 1,\n                method: method,\n                params: params\n              }), {\n                'Content-Type': 'application/json'\n              });\n\n            case 5:\n              response = _context3.sent;\n\n              if (response) {\n                _context3.next = 8;\n                break;\n              }\n\n              throw new Error('No response');\n\n            case 8:\n              if (!(!response.status || response.status > 400)) {\n                _context3.next = 10;\n                break;\n              }\n\n              throw new Error((0, _concat.default)(_context = \"Error response [\".concat(response.status, \"] \")).call(_context, response.statusText));\n\n            case 10:\n              body = response.response;\n\n              if (!('error' in body)) {\n                _context3.next = 13;\n                break;\n              }\n\n              throw new Error(body === null || body === void 0 ? void 0 : (_body$error = body.error) === null || _body$error === void 0 ? void 0 : _body$error.message, body === null || body === void 0 ? void 0 : (_body$error2 = body.error) === null || _body$error2 === void 0 ? void 0 : _body$error2.code, body === null || body === void 0 ? void 0 : (_body$error3 = body.error) === null || _body$error3 === void 0 ? void 0 : _body$error3.data);\n\n            case 13:\n              if ('result' in body) {\n                _context3.next = 15;\n                break;\n              }\n\n              throw new Error(\"Received unexpected JSON-RPC response\");\n\n            case 15:\n              return _context3.abrupt(\"return\", body.result);\n\n            case 18:\n              _context3.prev = 18;\n              _context3.t0 = _context3[\"catch\"](2);\n              throw new Error((0, _concat.default)(_context2 = \"Failed to make \\\"\".concat(method, \"\\\" request with networkConnector: \\\"\")).call(_context2, _context3.t0.message, \"\\\"\"));\n\n            case 21:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee, null, [[2, 18]]);\n    }));\n\n    return function () {\n      return _ref.apply(this, arguments);\n    };\n  }());\n  this.chainId = chainId;\n  this.url = url;\n  var parsed = new _url.default(url);\n  this.host = parsed.host;\n  this.path = parsed.pathname;\n});\n/**\n * Connect to web3 via a network url\n * Note: this has no knowledge of any user accounts\n */\n\nvar NetworkWeb3Connector = /*#__PURE__*/function (_AbstractWeb3Connecto) {\n  (0, _inherits2.default)(NetworkWeb3Connector, _AbstractWeb3Connecto);\n\n  var _super = _createSuper(NetworkWeb3Connector);\n\n  function NetworkWeb3Connector() {\n    var _ref3, _context4;\n\n    var _this2;\n\n    var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        urls = _ref2.urls,\n        defaultChainId = _ref2.defaultChainId,\n        chainId = _ref2.chainId,\n        speedyNodeApiKey = _ref2.speedyNodeApiKey;\n\n    (0, _classCallCheck2.default)(this, NetworkWeb3Connector);\n    _this2 = _super.call(this);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this2), \"type\", 'network');\n\n    if (!urls && speedyNodeApiKey) {\n      urls = (0, _MoralisRpcs.getMoralisRpcs)(speedyNodeApiKey);\n    }\n\n    if (!urls && !speedyNodeApiKey) {\n      throw new Error('Cannot connect to rpc: No urls or speedyNodeApiKey provided for NetworkWeb3Connector.');\n    }\n\n    if (\"browser\" !== 'node' && speedyNodeApiKey) {\n      // eslint-disable-next-line no-console\n      console.warn('Using speedyNodeApiKey on the browser enviroment is not recommended, as it is publicly visible.');\n    }\n\n    _this2.chainId = (0, _verifyChainId.default)((_ref3 = chainId !== null && chainId !== void 0 ? chainId : defaultChainId) !== null && _ref3 !== void 0 ? _ref3 : Number((0, _keys.default)(urls)[0]));\n    _this2.providers = (0, _reduce.default)(_context4 = (0, _keys.default)(urls)).call(_context4, function (accumulator, chainId) {\n      accumulator[Number(chainId)] = new MiniRpcProvider(Number(chainId), urls[Number(chainId)]);\n      return accumulator;\n    }, {});\n    return _this2;\n  }\n\n  (0, _createClass2.default)(NetworkWeb3Connector, [{\n    key: \"activate\",\n    value: function () {\n      var _activate = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2() {\n        var _ref4,\n            providedChainId,\n            _ref4$privateKey,\n            privateKey,\n            provider,\n            _args2 = arguments;\n\n        return _regenerator.default.wrap(function (_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _ref4 = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : {}, providedChainId = _ref4.chainId, _ref4$privateKey = _ref4.privateKey, privateKey = _ref4$privateKey === void 0 ? null : _ref4$privateKey;\n\n                if (providedChainId) {\n                  this.chainId = (0, _verifyChainId.default)(providedChainId);\n                }\n\n                provider = this.providers[(0, _convert.fromHexToDecimal)(this.chainId)];\n\n                if (provider) {\n                  _context5.next = 5;\n                  break;\n                }\n\n                throw new Error(\"No rpc url provided for chainId \".concat(this.chainId));\n\n              case 5:\n                if (!(privateKey != null)) {\n                  _context5.next = 9;\n                  break;\n                }\n\n                _context5.next = 8;\n                return new _ethers.ethers.Wallet(privateKey).getAddress();\n\n              case 8:\n                this.account = _context5.sent;\n\n              case 9:\n                return _context5.abrupt(\"return\", {\n                  provider: provider,\n                  chainId: this.chainId,\n                  account: this.account\n                });\n\n              case 10:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function () {\n        return _activate.apply(this, arguments);\n      };\n    }()\n  }]);\n  return NetworkWeb3Connector;\n}(_AbstractWeb3Connector.default);\n\nvar _default = NetworkWeb3Connector;\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/ASUS/Desktop/Twitter-Start/node_modules/moralis/lib/browser/Web3Connector/NetworkWeb3Connector.js"],"names":["_Reflect$construct","require","_Object$defineProperty","_interopRequireDefault","exports","value","default","_regenerator","_stringify","_concat","_url","_keys","_reduce","_assertThisInitialized2","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","_asyncToGenerator2","_createClass2","_classCallCheck2","_defineProperty2","_CoreManager","_convert","_verifyChainId","_AbstractWeb3Connector","_MoralisRpcs","_ethers","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","Super","result","NewTarget","constructor","arguments","apply","Reflect","sham","Proxy","Boolean","prototype","valueOf","call","e","MiniRpcProvider","chainId","url","_this","_ref","mark","_callee","method","params","RESTController","response","_context","body","_body$error","_body$error2","_body$error3","_context2","wrap","_context3","prev","next","getRESTController","ajax","jsonrpc","id","sent","Error","status","concat","statusText","error","message","code","data","abrupt","t0","stop","parsed","host","path","pathname","NetworkWeb3Connector","_AbstractWeb3Connecto","_super","_ref3","_context4","_this2","_ref2","length","undefined","urls","defaultChainId","speedyNodeApiKey","getMoralisRpcs","console","warn","Number","providers","accumulator","key","_activate","_callee2","_ref4","providedChainId","_ref4$privateKey","privateKey","provider","_args2","_context5","fromHexToDecimal","ethers","Wallet","getAddress","account","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _Reflect$construct = require(\"@babel/runtime-corejs3/core-js-stable/reflect/construct\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs3/regenerator\"));\n\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\n\nvar _concat = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"));\n\nvar _url = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/url\"));\n\nvar _keys = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/keys\"));\n\nvar _reduce = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/reduce\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/getPrototypeOf\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/createClass\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/classCallCheck\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/defineProperty\"));\n\nvar _CoreManager = _interopRequireDefault(require(\"../CoreManager\"));\n\nvar _convert = require(\"../utils/convert\");\n\nvar _verifyChainId = _interopRequireDefault(require(\"../utils/verifyChainId\"));\n\nvar _AbstractWeb3Connector = _interopRequireDefault(require(\"./AbstractWeb3Connector\"));\n\nvar _MoralisRpcs = require(\"./MoralisRpcs\");\n\nvar _ethers = require(\"ethers\");\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = (0, _getPrototypeOf2.default)(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n      result = _Reflect$construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return (0, _possibleConstructorReturn2.default)(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !_Reflect$construct) return false;\n  if (_Reflect$construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(_Reflect$construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar MiniRpcProvider = /*#__PURE__*/(0, _createClass2.default)(function MiniRpcProvider(chainId, url) {\n  var _this = this;\n\n  (0, _classCallCheck2.default)(this, MiniRpcProvider);\n  (0, _defineProperty2.default)(this, \"request\", /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(method, params) {\n      var RESTController, response, _context, body, _body$error, _body$error2, _body$error3, _context2;\n\n      return _regenerator.default.wrap(function (_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (typeof method !== 'string') {\n                // eslint-disable-next-line prefer-destructuring\n                params = method.params; // eslint-disable-next-line prefer-destructuring\n\n                method = method.method;\n              }\n\n              RESTController = _CoreManager.default.getRESTController();\n              _context3.prev = 2;\n              _context3.next = 5;\n              return RESTController.ajax('POST', _this.url, (0, _stringify.default)({\n                jsonrpc: '2.0',\n                id: 1,\n                method: method,\n                params: params\n              }), {\n                'Content-Type': 'application/json'\n              });\n\n            case 5:\n              response = _context3.sent;\n\n              if (response) {\n                _context3.next = 8;\n                break;\n              }\n\n              throw new Error('No response');\n\n            case 8:\n              if (!(!response.status || response.status > 400)) {\n                _context3.next = 10;\n                break;\n              }\n\n              throw new Error((0, _concat.default)(_context = \"Error response [\".concat(response.status, \"] \")).call(_context, response.statusText));\n\n            case 10:\n              body = response.response;\n\n              if (!('error' in body)) {\n                _context3.next = 13;\n                break;\n              }\n\n              throw new Error(body === null || body === void 0 ? void 0 : (_body$error = body.error) === null || _body$error === void 0 ? void 0 : _body$error.message, body === null || body === void 0 ? void 0 : (_body$error2 = body.error) === null || _body$error2 === void 0 ? void 0 : _body$error2.code, body === null || body === void 0 ? void 0 : (_body$error3 = body.error) === null || _body$error3 === void 0 ? void 0 : _body$error3.data);\n\n            case 13:\n              if ('result' in body) {\n                _context3.next = 15;\n                break;\n              }\n\n              throw new Error(\"Received unexpected JSON-RPC response\");\n\n            case 15:\n              return _context3.abrupt(\"return\", body.result);\n\n            case 18:\n              _context3.prev = 18;\n              _context3.t0 = _context3[\"catch\"](2);\n              throw new Error((0, _concat.default)(_context2 = \"Failed to make \\\"\".concat(method, \"\\\" request with networkConnector: \\\"\")).call(_context2, _context3.t0.message, \"\\\"\"));\n\n            case 21:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee, null, [[2, 18]]);\n    }));\n\n    return function () {\n      return _ref.apply(this, arguments);\n    };\n  }());\n  this.chainId = chainId;\n  this.url = url;\n  var parsed = new _url.default(url);\n  this.host = parsed.host;\n  this.path = parsed.pathname;\n});\n/**\n * Connect to web3 via a network url\n * Note: this has no knowledge of any user accounts\n */\n\nvar NetworkWeb3Connector = /*#__PURE__*/function (_AbstractWeb3Connecto) {\n  (0, _inherits2.default)(NetworkWeb3Connector, _AbstractWeb3Connecto);\n\n  var _super = _createSuper(NetworkWeb3Connector);\n\n  function NetworkWeb3Connector() {\n    var _ref3, _context4;\n\n    var _this2;\n\n    var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        urls = _ref2.urls,\n        defaultChainId = _ref2.defaultChainId,\n        chainId = _ref2.chainId,\n        speedyNodeApiKey = _ref2.speedyNodeApiKey;\n\n    (0, _classCallCheck2.default)(this, NetworkWeb3Connector);\n    _this2 = _super.call(this);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this2), \"type\", 'network');\n\n    if (!urls && speedyNodeApiKey) {\n      urls = (0, _MoralisRpcs.getMoralisRpcs)(speedyNodeApiKey);\n    }\n\n    if (!urls && !speedyNodeApiKey) {\n      throw new Error('Cannot connect to rpc: No urls or speedyNodeApiKey provided for NetworkWeb3Connector.');\n    }\n\n    if (\"browser\" !== 'node' && speedyNodeApiKey) {\n      // eslint-disable-next-line no-console\n      console.warn('Using speedyNodeApiKey on the browser enviroment is not recommended, as it is publicly visible.');\n    }\n\n    _this2.chainId = (0, _verifyChainId.default)((_ref3 = chainId !== null && chainId !== void 0 ? chainId : defaultChainId) !== null && _ref3 !== void 0 ? _ref3 : Number((0, _keys.default)(urls)[0]));\n    _this2.providers = (0, _reduce.default)(_context4 = (0, _keys.default)(urls)).call(_context4, function (accumulator, chainId) {\n      accumulator[Number(chainId)] = new MiniRpcProvider(Number(chainId), urls[Number(chainId)]);\n      return accumulator;\n    }, {});\n    return _this2;\n  }\n\n  (0, _createClass2.default)(NetworkWeb3Connector, [{\n    key: \"activate\",\n    value: function () {\n      var _activate = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2() {\n        var _ref4,\n            providedChainId,\n            _ref4$privateKey,\n            privateKey,\n            provider,\n            _args2 = arguments;\n\n        return _regenerator.default.wrap(function (_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _ref4 = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : {}, providedChainId = _ref4.chainId, _ref4$privateKey = _ref4.privateKey, privateKey = _ref4$privateKey === void 0 ? null : _ref4$privateKey;\n\n                if (providedChainId) {\n                  this.chainId = (0, _verifyChainId.default)(providedChainId);\n                }\n\n                provider = this.providers[(0, _convert.fromHexToDecimal)(this.chainId)];\n\n                if (provider) {\n                  _context5.next = 5;\n                  break;\n                }\n\n                throw new Error(\"No rpc url provided for chainId \".concat(this.chainId));\n\n              case 5:\n                if (!(privateKey != null)) {\n                  _context5.next = 9;\n                  break;\n                }\n\n                _context5.next = 8;\n                return new _ethers.ethers.Wallet(privateKey).getAddress();\n\n              case 8:\n                this.account = _context5.sent;\n\n              case 9:\n                return _context5.abrupt(\"return\", {\n                  provider: provider,\n                  chainId: this.chainId,\n                  account: this.account\n                });\n\n              case 10:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function () {\n        return _activate.apply(this, arguments);\n      };\n    }()\n  }]);\n  return NetworkWeb3Connector;\n}(_AbstractWeb3Connector.default);\n\nvar _default = NetworkWeb3Connector;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}